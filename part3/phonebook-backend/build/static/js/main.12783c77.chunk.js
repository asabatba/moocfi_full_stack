(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(41)},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),c=n.n(o),u=n(3),i=n(2),l=n.n(i),s=n(4),f=n(5),p=n.n(f),m="/api/persons",d={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.get(m).then((function(e){return e.data})).catch((function(e){console.error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post(m,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.put("".concat(m,"/").concat(t),n).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.delete("".concat(m,"/").concat(t)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=(n(39),function(e){var t=e.persons,n=e.setPersons,o=e.setMessage,c=function(e,r){d.update(e,r).then((function(r){n(t.map((function(t){return t.id===e?r:t}))),o({content:"Updated listed phone of '".concat(r.name,"'"),type:"info"}),setTimeout((function(){o({content:null,type:"info"})}),3e3)})).catch((function(a){console.log(a.response),n(t.filter((function(t){return t.id!==e}))),o({content:"Update of ".concat(r.name," failed"),type:"error"}),setTimeout((function(){o({content:null,type:"error"})}),3e3)}))},i=Object(r.useState)(""),l=Object(u.a)(i,2),s=l[0],f=l[1],p=Object(r.useState)(""),m=Object(u.a)(p,2),h=m[0],v=m[1];return a.a.createElement("form",null,a.a.createElement("div",null,"Name: ",a.a.createElement("input",{value:s,onChange:function(e){return f(e.target.value)}}),a.a.createElement("br",null),"Number: ",a.a.createElement("input",{value:h,onChange:function(e){return v(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var r={name:s,number:h},a=t.find((function(e){return e.name===s}));void 0===a?d.create(r).then((function(e){console.log(e),n(t.concat(e)),o({content:"Added '".concat(e.name,"' to the phonebook"),type:"info"}),setTimeout((function(){o({content:null,type:"info"})}),3e3)})):window.confirm("The name ".concat(s," has already been added. Update phone number?"))&&c(a.id,r)}},"add")))}),v=(n(40),function(e){var t=e.person,n=e.removeId;return a.a.createElement("div",null,t.name," ~ ",t.number," ",a.a.createElement("button",{onClick:function(){window.confirm("Do you really want to remove ".concat(t.name," from the list?"))&&n(t.id)}},"delete"))}),b=function(e){var t=e.persons,n=e.filter,r=e.removeId;return a.a.createElement("div",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return a.a.createElement(v,{key:e.name,person:e,removeId:r})})))},E=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),l=i[0],s=i[1],f=Object(r.useState)({content:null,type:"info"}),p=Object(u.a)(f,2),m=p[0],v=p[1];Object(r.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]);var E="message "+m.type+" "+(null!=m.content?" active":"");return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement("div",{className:E},m.content),a.a.createElement("h3",null,"Filter phonebook"),a.a.createElement("input",{value:l,onChange:function(e){return s(e.target.value)}}),a.a.createElement("h3",null,"Add new people"),a.a.createElement(h,{persons:n,setPersons:o,setMessage:v}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(b,{persons:n,filter:l,removeId:function(e){return d.remove(e).then((function(t){o(n.filter((function(t){return t.id!==e})))}))}}))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(E,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.12783c77.chunk.js.map